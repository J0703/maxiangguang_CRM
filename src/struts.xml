<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
    <constant name="struts.devMode" value="true"/>
    <constant name="struts.i18n.encoding" value="utf-8"/>

    <!--将struts2中的对象交给spring完成-->
    <constant name="struts.objectFactory" value="spring"/>


    <package name="staff" extends="json-default" namespace="/staff">
        <!--自定义拦截器-->
        <interceptors>
            <!--登录拦截-->
            <interceptor name="loginInterceptor" class="com.lanou.util.LoginInterceptor">
                <param name="excludeMethods">login</param>
            </interceptor>

            <!--HRCheck-->
            <interceptor name="HRCheck" class="com.lanou.util.HRCheck">
                <param name="includeMethods">add,prepareEdit,edit</param>
            </interceptor>

            <!--自定义拦截器栈-->
            <interceptor-stack name="myInterceptorStack">
                <interceptor-ref name="loginInterceptor"/>
                <interceptor-ref name="HRCheck"/>
                <!--引入系统拦截器-->
                <interceptor-ref name="defaultStack"/>
            </interceptor-stack>
        </interceptors>

        <!--拦截-->
        <default-interceptor-ref name="myInterceptorStack"/>

        <!--登录-->
        <action name="login"
                class="com.lanou.action.StaffAction"
                method="login">
            <result name="success">/pages/frame.jsp</result>
            <result name="error">/pages/login.jsp</result>
            <result name="input">/pages/login.jsp</result>
        </action>

        <!--修改密码-->
        <action name="editLoginPwd"
                class="com.lanou.action.StaffAction"
                method="editLoginPwd">
            <result name="success" type="redirect">/pages/login.jsp</result>
            <result name="error">/pages/staff/updPwd.jsp</result>
            <result name="input">/pages/error.jsp</result>
        </action>

        <!--退出登录-->
        <action name="logout"
                class="com.lanou.action.StaffAction"
                method="logout">
            <result name="success" type="redirect">/pages/login.jsp</result>
        </action>

        <!--查询所有-->
        <action name="findAll"
                class="com.lanou.action.StaffAction"
                method="findAll">
            <result name="success">/pages/staff/listStaff.jsp</result>
        </action>

        <!--添加员工-->
        <action name="add"
                class="com.lanou.action.StaffAction"
                method="add">
            <result name="success" type="chain">findAllStaff</result>
            <result name="input">/pages/error.jsp</result>
            <result name="error">/pages/frame.jsp</result>
        </action>

        <!--编辑前的准备-->
        <action name="prepareEdit"
                class="staffAction"
                method="prepareEdit">
            <result name="success">/pages/staff/editStaff.jsp</result>
            <result name="error">/pages/staff/editStaff.jsp</result>
        </action>

        <!--编辑员工-->
        <action name="edit"
                class="staffAction"
                method="edit">
            <result name="success" type="chain">findAllStaff</result>
            <result name="error">/pages/staff/editStaff.jsp</result>
        </action>

        <action name="find"
                class="staffAction"
                method="find">
            <result name="success">/pages/staff/listStaff.jsp</result>
            <result name="input">/pages/error.jsp</result>
        </action>

        <!--分页查询-->
        <action name="findAllStaff"
                class="staffAction"
                method="findAllStaff">
            <result name="success">/pages/staff/listStaff.jsp</result>
        </action>

    </package>

    <package name="department" extends="json-default" namespace="/department">

        <!--自定义拦截器-->
        <interceptors>
            <!--登录拦截-->
            <interceptor name="loginInterceptor" class="com.lanou.util.LoginInterceptor">
                <param name="excludeMethods">login</param>
            </interceptor>

            <!--HRCheck-->
            <interceptor name="HRCheck" class="com.lanou.util.HRCheck">
                <param name="includeMethods">add,prepareEdit,edit</param>
            </interceptor>

            <!--自定义拦截器栈-->
            <interceptor-stack name="myInterceptorStack">
                <interceptor-ref name="loginInterceptor"/>
                <interceptor-ref name="HRCheck"/>
                <!--引入系统拦截器-->
                <interceptor-ref name="defaultStack"/>
            </interceptor-stack>
        </interceptors>

        <!--拦截-->
        <default-interceptor-ref name="myInterceptorStack"/>

        <!--查询所有部门-->
        <action name="findAll"
                class="com.lanou.action.DepartmentAction"
                method="findAll">
            <result name="success">/pages/department/listDepartment.jsp</result>
        </action>

        <!--添加部门-->
        <action name="add"
                class="com.lanou.action.DepartmentAction"
                method="add">
            <result name="success" type="chain">findAllDepart</result>
            <result name="error">/pages/department/addOrEditDepartment.jsp</result>
        </action>

        <!--分页-->
        <action name="findAllDepart"
                class="departmentAction"
                method="findAllDepart">
            <result name="success">/pages/department/listDepartment.jsp</result>
        </action>
    </package>

    <package name="post" extends="json-default" namespace="/post">

        <!--自定义拦截器-->
        <interceptors>
            <!--登录拦截-->
            <interceptor name="loginInterceptor" class="com.lanou.util.LoginInterceptor">
                <param name="excludeMethods">login</param>
            </interceptor>

            <!--HRCheck-->
            <interceptor name="HRCheck" class="com.lanou.util.HRCheck">
                <param name="includeMethods">add,prepareEdit,edit</param>
            </interceptor>

            <!--自定义拦截器栈-->
            <interceptor-stack name="myInterceptorStack">
                <interceptor-ref name="loginInterceptor"/>
                <interceptor-ref name="HRCheck"/>
                <!--引入系统拦截器-->
                <interceptor-ref name="defaultStack"/>
            </interceptor-stack>
        </interceptors>

        <!--拦截-->
        <default-interceptor-ref name="myInterceptorStack"/>

        <!--查询所有职务-->
        <action name="findAll"
                class="com.lanou.action.PostAction"
                method="findAll">
            <result name="success">/pages/post/listPost.jsp</result>
        </action>

        <!--分页查询-->
        <action name="findAllPost"
                class="postAction"
                method="findAllPost">
            <result name="success">/pages/post/listPost.jsp</result>
        </action>

        <!--添加职务-->
        <action name="add"
                class="com.lanou.action.PostAction"
                method="add">
            <result name="success" type="chain">findAllPost</result>
            <result name="input">/pages/error.jsp</result>
            <result name="error">/pages/post/addOrEditPost.jsp</result>
        </action>

        <!--显示部门-->
        <action name="showDepart"
                class="com.lanou.action.PostAction"
                method="showDepart">
            <result name="success" type="json">
                <param name="root">departmentList</param>
            </result>
        </action>

        <!--显示职务-->
        <action name="showPost"
                class="com.lanou.action.PostAction"
                method="showPost">
            <result name="success" type="json">
                <param name="root">postList</param>
            </result>
        </action>
    </package>

</struts>